jQuery(function(n){n(".yith-wcet-color-picker").wpColorPicker();var i=n("#yith-wcet-logo-url"),a=n("#yith-wcet-logo-image"),t=n("#yith-wcet-logo-and-del-container"),e=n("#yith-wcet-custom-logo-url").val(),o=n("#yith-wcet-remove-logo-btn"),c=n("#yith-wcet-logo-url-footer"),l=n("#yith-wcet-logo-image-footer"),r=n("#yith-wcet-logo-and-del-container-footer"),s=n("#yith-wcet-remove-logo-btn-footer"),h=n("#yith-wcet-custom-logo-btn-footer-add-himg"),d=n(".yith-wcet-custom-links-remove-btn"),f=parseInt(n("#yith-wcet-custom-links-count").data("custom-links-count")),w=n("#yith-wcet-custom-links-table"),g=n("#yith-wcet-custom-links-add-btn"),p=n("#yith-wcet-custom-link-row-default").html(),u=function(){d.on("click",function(){var t=n(this).attr("custom-link-index");n("#yith-wcet-custom-links-text"+t).val(""),n("#yith-wcet-custom-links-url"+t).val(""),n("#yith-wcet-custom-link-row"+t).hide()})},y=[[0,0,"#769ed2","#e0e7f0","transparent","#656565",1,"#e0e7f0",1],[2,17,"#6dcbbb","#65707a","#6dcbbb","#656565",2,"#6dcbbb",0],[2,0,"#ee6563","#ffffff","transparent","#ffffff",1,"#e0e7f0",1]],m=[[36,48,36,48],[36,48,36,48],[25,20,25,20],[25,25,25,25]],v=["#ffffff","#ffffff","#444444","#444444"],_=n("#yith-wcet-price-title-bg-color"),b=n("#yith-wcet-premium-mail-style"),k=n("#yith-wcet-header-position"),x=n("#yith-wcet-page-width"),z=n("#yith-wcet-page-border-radius"),I=n("#yith-wcet-base-color"),j=n("#yith-wcet-body-color"),D=n("#yith-wcet-bg-color"),N=n("#yith-wcet-txt-color"),S=n("#yith-wcet-header-color");footer_text_color=n("#yith-wcet-footer-text-color"),h1_size=n("#yith-wcet-h1-size"),h2_size=n("#yith-wcet-h2-size"),h3_size=n("#yith-wcet-h3-size"),body_size=n("#yith-wcet-body-size"),table_border_width=n("#yith-wcet-table-border-width"),table_border_color=n("#yith-wcet-table-border-color"),table_bg_color=n("#yith-wcet-table-bg-color"),socials_on_header=n("#yith-wcet-socials-on-header"),socials_on_footer=n("#yith-wcet-socials-on-footer"),socials_color=n("#yith-wcet-socials-color"),image_preview_template=n("#yith-wcet-image-preview-template"),n("#yith-wcet-upload-btn").on("click",function(t){t.preventDefault();var o=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var e=o.state().get("selection").first().toJSON().url;i.val(e),a.attr("src",e),a.show()})}),n("#yith-wcet-custom-logo-btn").on("click",function(t){i.val(e),0<e.length&&(a.attr("src",e),a.show())}),t.on("mouseover",function(t){o.show()}),t.on("mouseout",function(t){o.hide()}),o.on("click",function(){i.val(""),a.attr("src",""),a.hide()}),n("#yith-wcet-upload-btn-footer").on("click",function(t){t.preventDefault();var o=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(t){var e=o.state().get("selection").first().toJSON().url;c.val(e),l.attr("src",e),l.show()})}),n("#yith-wcet-custom-logo-btn-footer").on("click",function(t){c.val(e),0<e.length&&(l.attr("src",e),l.show())}),r.on("mouseover",function(t){s.show()}),r.on("mouseout",function(t){s.hide()}),s.on("click",function(){c.val(""),l.attr("src",""),l.hide()}),h.on("click",function(){c.val(i.val()),0<i.val().length?(l.attr("src",i.val()),l.show()):(l.attr("src",""),l.hide())}),u(),g.on("click",function(){var t='<tr id="yith-wcet-custom-link-row'+ ++f+'">';t+=p.replace(/INDEX/g,f),t+="</tr>",w.append(t),d=n(".yith-wcet-custom-links-remove-btn"),u()}),b.on("change",function(){var t="default"==n(this).val()?1:parseInt(n(this).val())+1,e=ajax_object.assets_url+"/images/preview-emails/template-"+t+".png";if(image_preview_template.attr("src",e),"default"!=n(this).val()){var o=parseInt(n(this).val()-1);k.prop("selectedIndex",y[o][0]),x.val(600),z.val(y[o][1]),I.val(y[o][2]),I.trigger("change"),j.val("#ffffff"),j.trigger("change"),D.val(y[o][3]),D.trigger("change"),N.val("#656565"),N.trigger("change"),S.val(y[o][4]),S.trigger("change"),footer_text_color.val(y[o][5]),footer_text_color.trigger("change"),h1_size.val(25),h2_size.val(14),h3_size.val(13),body_size.val(12),table_border_width.val(y[o][6]),table_border_color.val(y[o][7]),table_border_color.trigger("change"),table_bg_color.val("#ffffff"),table_bg_color.trigger("change"),table_bg_color.val("transparent"),socials_on_header.prop("checked","checked"),socials_on_footer.prop("checked","checked"),socials_color.prop("selectedIndex",y[o][8]),n("#yith-wcet-header-padding-top").val(m[o+1][0]),n("#yith-wcet-header-padding-right").val(m[o+1][1]),n("#yith-wcet-header-padding-bottom").val(m[o+1][2]),n("#yith-wcet-header-padding-left").val(m[o+1][3]),_.val(v[o+1]),_.trigger("change")}else n("#yith-wcet-header-padding-top").val(m[0][0]),n("#yith-wcet-header-padding-right").val(m[0][1]),n("#yith-wcet-header-padding-bottom").val(m[0][2]),n("#yith-wcet-header-padding-left").val(m[0][3]),_.val(v[0]),_.trigger("change")});var E={message:null,overlayCSS:{background:"#000",opacity:.6},ignoreIfBlocked:!0};n(".yith-wcet-test-email-wrapper").on("click",".yith-wcet-test-email-send",function(t){var e=n(t.target).closest(".yith-wcet-test-email-send"),o=e.closest(".yith-wcet-test-email-wrapper"),i=o.find(".yith-wcet-test-email-recipient").first(),a=o.find(".yith-wcet-test-email-message").first(),c=i.val(),l=o.data("template_id");if(0<c.length&&l){e.block(E);var r={preview:1,template_id:l,send_to:c,action:"yith_wcet_send_test_email"};n.ajax({type:"POST",data:r,url:ajaxurl,success:function(t){"undefined"!=typeof t.error?a.html('<span class="error">'+t.error+"</span>"):"undefined"!=typeof t.message&&a.html('<span class="message">'+t.message+"</span>"),a.find("span").delay(3e3).fadeOut()},complete:function(){e.unblock()}})}});var O=wp.codeEditor.initialize("yith-wcet-additional-css",{type:"text/css"}),X=n("#yith-wcet-additional-css");n("#yith-wcet-preview-email-btn").on("click",function(){X.val(O.codemirror.getValue()).trigger("change");var t,e,o={ajax:!0,url:ajaxurl,responsive_controls:!0,ajax_data:n.extend({action:"yith_wcet_email_preview",yith_wcet_preview_mail:"1",template_id:"ajax_preview"},(t={},e=n('[name^="_template_meta"]:not(#yith-wcet-custom-links-textINDEX):not(#yith-wcet-custom-links-urlINDEX)').serializeArray(),n.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t))};n.fn.yith_wcet_popup(o)})});