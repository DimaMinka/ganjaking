/**
 * @author    ThemePunch <info@themepunch.com>
 * @link      https://www.themepunch.com/
 * @copyright 2018 ThemePunch
 */
(function(){var t,e="ontouchend"in document,i=jQuery.fn.revolution,s=i.is_mobile();window.RsLiquideffectAddOn=function(i,s,r,a){if(!i||typeof PIXI==="undefined")return;PIXI.utils.skipHello();s=i(s);if(!s.length)return;t=i;t.event.special.rsLiquidEffectDestroyed={remove:function(t){t.handler()}};var h=s.find("rs-slide[data-liquideffect]").each((function(){var i,s=t(this),n=JSON.parse(s.attr("data-liquideffect"));if(!n)return;n.transcross=true;var a,h=s.children("img");if(!h.attr("data-lazyload")){a=h.attr("src");h.attr("data-lazyload",a);h.attr("src",r+"public/assets/assets/dummy.png")}else{a=h.attr("data-lazyload")}if(!a){a=s.find("rs-sbg-wrap").contents().filter((function(){return this.nodeType===8}));if(a.length){i=a[0].nodeValue;a=false;if(i){i=i.split('data-lazyload="');if(i.length===2){i=i[1].split('"');if(i.length>1)a=i[0]}else{i=i.split('src="');if(i.length===2){i=i[1].split('"');if(i.length>1)a=i[0]}}}}else{a=false}}if(a){n.sprite=a;if(e&&n.mobile)n.interactive=false;var o="ei:"+n.easing+";eo:"+n.easing+";s:"+n.transtime+"ms;r:0;t:";o+=n.transcross?"crossfade":"fade";o+=";sl:0;";var l=n.easing.split(".");n.easing=l.length===2?punchgs[l[0]][l[1]]:punchgs.hasOwnProperty(l[0])?punchgs[l[0]]:punchgs.Power3.easeInOut;s.attr("data-anim",o).removeAttr("data-panzoom").data({liquideffectsettings:n,liquideffectorig:t.extend({},n)});if(n.interactive){l=n.intereasing.split(".");n.intereasing=l.length===2?punchgs[l[0]][l[1]]:punchgs.hasOwnProperty(l[0])?punchgs[l[0]]:punchgs.Power3.easeInOut}}else{s.removeData("liquideffect").removeAttr("data-liquideffect")}}));h=s.find("rs-slide[data-liquideffect]");if(h.length)return new n(s,h);else return false};function n(t,e){this.slider=t;this.effects=e;this.firstrun=true;t.one("revolution.slide.onloaded",this.onLoaded.bind(this)).one("rsLiquidEffectDestroyed",this.destroy.bind(this))}var r=function(t,e,s){return i.gA(t,"lazyload")!==undefined?i.gA(t,"lazyload"):i[s].lazyloaddata!==undefined&&i[s].lazyloaddata.length>0&&i.gA(t,i[s].lazyloaddata)!==undefined?i.gA(t,i[s].lazyloaddata):i.gA(t,"lazy-src")!==undefined?i.gA(t,"lazy-src"):i.gA(t,"lazy-wpfc-original-src")!==undefined?i.gA(t,"lazy-wpfc-original-src"):i.gA(t,"lazy")!==undefined?i.gA(t,"lazy"):e};n.prototype={onLoaded:function(){this.slider.on("revolution.slide.onbeforeswap",this.beforeChange.bind(this)).on("revolution.slide.onchange",this.onChange.bind(this))},onChange:function(e,i){var s,n;if(!this.ranOnce){s=i.slide;if(s&&!(s instanceof t))s=t(s);if(!s||!s.length)s=this.slider.find("rs-slide").eq(0);this.beforeChange(false,{nextslide:s});return}s=i.prevSlide;if(s&&!(s instanceof t))s=t(s);if(s&&s.length){n=s.removeClass("liquid-force-visible").data("liquideffectcanvas");if(n){n.reset()}}s=i.currentSlide;if(s&&!(s instanceof t))s=t(s);if(!s||!s.length)s=this.slider.find("rs-slide").eq(0);n=s.data("liquideffectcanvas")},beforeChange:function(e,s){this.ranOnce=true;var n=[];if(!this.effectsCreated){this.effectsCreated=true;this.effects.each((function(){var e=t(this),i=e.data("liquideffectsettings").imagesize.split("|");if(i.length===2){e.data("liquideffectcanvasprep",[parseInt(i[0],10),parseInt(i[1],10)])}else{n[n.length]=this}}))}function a(t,e){var a=new Image,h=e.find("rs-sbg");a.crossOrigin="Anonymous";var o=r(h[0],undefined,t.slider[0].id),l=o!==undefined?o:i.gA(h[0],"svg_src")!=undefined?i.gA(h[0],"svg_src"):h[0].src===undefined?h.data("src"):h[0].src;if(l!==undefined)a.src=l;else a.src=h.css("background-image").slice(4,-1).replace(/"/g,"");a.onload=function(){e.data("liquideffectcanvasprep",[parseInt(a.naturalWidth,10),parseInt(a.naturalHeight,10)]);t.imgCount++;if(t.imgCount===n.length)t.run(s)}}if(!n.length){this.run(s)}else{this.imgCount=0;for(var h=0;h<n.length;h++)a(this,t(n[h]))}},run:function(t){var e;if(!this.firstrun){if(t.currentslide){e=t.currentslide.data("liquideffectcanvas");if(e)e.animateOut(t.nextslide)}e=t.nextslide.data("liquideffectcanvas");if(!e){e=t.nextslide.data("liquideffectcanvasprep");if(e){e=new a(t.nextslide,e[0],e[1],this.slider);t.nextslide.removeData("liquideffectcanvasprep");t.nextslide.data("liquideffectcanvas",e)}}if(e){t.nextslide.addClass("liquid-force-visible");if(e.settings.transcross)e.animateIn()}}else{e=t.nextslide.data("liquideffectcanvas");if(!e){e=t.nextslide.data("liquideffectcanvasprep");if(e){e=new a(t.nextslide,e[0],e[1],this.slider);t.nextslide.removeData("liquideffectcanvasprep");t.nextslide.data("liquideffectcanvas",e)}}if(e)e.animateIn(true);this.firstrun=false}},destroy:function(){if(this.slider)this.slider.off("revolution.slide.onloaded revolution.slide.onbeforeswap revolution.slide.onafterswap");if(this.effects)this.effects.each((function(){t(this).removeData("liquideffectcanvas liquideffectsettings liquideffectorig")}));for(var e in this)if(this.hasOwnProperty(e))delete this[e]}};function a(t,e,i,s){this.slide=t;this.slideWidth=t.width();this.slideHeight=t.height();this.slideRatio=this.slideWidth/this.slideHeight;this.imageRatio=e/i;this.w=e;this.h=i;this.mouse={x:0,y:0};this.frame=undefined;this.settings=t.data("liquideffectsettings");this.orig=t.data("liquideffectorig");this.displacement=new PIXI.Sprite.fromImage(this.settings.image,true);this.displacement.texture.baseTexture.wrapMode=PIXI.WRAP_MODES.REPEAT;this.displacement.scale.x=2;this.displacement.scale.y=2;this.displacement.anchor.set(.5);var n=this.settings.sprite,r=new PIXI.Texture.fromImage(n,true),a=new PIXI.Container;this.img=new PIXI.Sprite(r);this.img.anchor.set(.5);a.addChild(this.img);this.filter=new PIXI.filters.DisplacementFilter(this.displacement);this.filter.autoFit=true;this.stage=new PIXI.Container;this.stage.addChild(a);this.stage.addChild(this.displacement);this.stage.filters=[this.filter];this.stage.interactive=true;this.renderer=new PIXI.autoDetectRenderer(this.slideWidth,this.slideHeight,{transparent:true});var h=this.renderer.view.style;h.top="50%";h.left="50%";h.msTransform="translate(-50%, -50%) scale(1.2)";h.transform="translate( -50%, -50% ) scale(1.2)";t.find("rs-sbg-wrap").append(this.renderer.view);if(this.settings.autoplay){this.filter.scale.x=this.settings.scalex;this.filter.scale.y=this.settings.scaley}else{this.filter.scale.x=0;this.filter.scale.y=0}if(this.settings.interactive){a.interactive=true;if(this.settings.event==="mousedown"){a.buttonMode=true;a.pointerdown=this.onClick.bind(this);a.pointerup=a.pointerout=this.onReturn.bind(this)}else{a.pointerover=this.onMouseEnter.bind(this);a.pointermove=this.onMouseMove.bind(this);a.pointerout=this.onMouseLeave.bind(this)}}else{this.renderer.view.style.pointerEvents="none"}this.supressEvents=true;this.started=false;this.ticker=new PIXI.ticker.Ticker;this.ticker.add(this.tick.bind(this));s.on("revolution.slide.afterdraw",this.resize.bind(this));this.resize.bind(this)()}a.prototype={tick:function(t){if(this.settings.autoplay){if(this.settings.speedx)this.displacement.x+=this.settings.speedx*t;if(this.settings.speedy)this.displacement.y+=this.settings.speedy;if(this.settings.rotationx)this.displacement.rotation.x+=this.settings.rotationx;if(this.settings.rotationy)this.displacement.rotation.y+=this.settings.rotationy;if(this.settings.rotation)this.displacement.rotation+=this.settings.rotation*Math.PI/180}this.renderer.render(this.stage)},onClick:function(){if(this.supressEvents)return;var t=this.settings.intertime*.001;if(this.settings.interscalex||this.settings.interscaley){var e={ease:this.settings.intereasing,overwrite:"all"};if(this.settings.interscalex)e.x=this.orig.scalex+this.settings.interscalex;if(this.settings.interscaley)e.y=this.orig.scaley+this.settings.interscaley;punchgs.TweenLite.to(this.filter.scale,t,e)}punchgs.TweenLite.to(this.settings,t,{speedx:this.orig.speedx+this.settings.interspeedx,speedy:this.orig.speedy+this.settings.interspeedy,rotation:this.orig.rotation+this.settings.interotation,ease:this.settings.intereasing,overwrite:"all"})},onReturn:function(){if(this.supressEvents)return;var t=this.settings.intertime*.001;punchgs.TweenLite.to(this.filter.scale,t,{x:this.orig.scalex,y:this.orig.scaley,ease:this.settings.intereasing,overwrite:"all"});punchgs.TweenLite.to(this.settings,t,{speedx:this.orig.speedx,speedy:this.orig.speedy,rotation:this.orig.rotation,ease:this.settings.intereasing,overwrite:"all"})},onMouseMove:function(t){if(this.supressEvents)return;if(!this.entered){this.onMouseEnter(t);return}this.mouse.x=Math.round(t.data.global.x);this.mouse.y=Math.round(t.data.global.y);if(!this.frame)this.frame=window.requestAnimationFrame(this.updateDisplacement.bind(this))},updateDisplacement:function(){this.frame=window.cancelAnimationFrame(this.frame);var t,e=this.mouse.x-this.x,i=this.mouse.y-this.y,s=Date.now(),n=s-this.t,r=Math.sqrt(e*e+i*i)/n,a=this.settings.intertime*.001;this.x=this.mouse.x;this.y=this.mouse.y;this.t=s;if(this.settings.interscalex||this.settings.interscaley){var h={ease:this.settings.intereasing,overwrite:"all",onComplete:this.onReturn.bind(this)};if(this.settings.interscalex)h.x=this.settings.interscalex*r;if(this.settings.interscaley)h.y=this.settings.interscaley*r;t=true;punchgs.TweenLite.to(this.filter.scale,a,h)}var o={speedx:this.orig.speedx+this.settings.interspeedx,speedy:this.orig.speedy+this.settings.interspeedy,rotation:this.orig.rotation+this.settings.interotation,ease:this.settings.intereasing,overwrite:"all"};if(!t)o.onComplete=this.onReturn.bind(this);punchgs.TweenLite.to(this.settings,a,o)},onMouseEnter:function(t){if(this.supressEvents)return;this.entered=true;this.x=t.data.global.x;this.y=t.data.global.y;this.t=Date.now()},onMouseLeave:function(){this.entered=false},eventsReady:function(){this.supressEvents=false},onComplete:function(){var t=this.nextslide.data("liquideffectcanvas");if(t&&!t.started)t.animateIn();this.nextslide=false},onUpdateIn:function(){if(this.tweenIn){this.displacement.rotation+=this.tweenIn.progress()*.02;this.displacement.scale.set(this.tweenIn.progress()*3)}},onUpdateOut:function(){if(this.tweenOut){this.displacement.rotation+=this.tweenOut.progress()*.02;this.displacement.scale.set(this.tweenOut.progress()*3)}},transitionIn:function(){var t=this.settings.transtime*.001;var e={x:this.orig.scalex,y:this.orig.scaley,ease:this.settings.easing,overwrite:"all",delay:this.del};var i={speedx:this.orig.speedx,speedy:this.orig.speedy,rotationx:this.orig.rotationx,rotationy:this.orig.rotationy,rotation:this.orig.rotation,ease:this.settings.easing,overwrite:"all",delay:this.del};if(this.interactive&&this.event==="mousedown")e.onComplete=this.eventsReady.bind(this);else this.supressEvents=false;if(this.settings.transpower)i.onUpdate=this.onUpdateIn.bind(this);punchgs.TweenLite.to(this.filter.scale,t,e);this.tweenIn=punchgs.TweenLite.to(this.settings,t,i);punchgs.TweenLite.to(this.renderer.view,t*.5,{opacity:1,ease:this.settings.easing,overwrite:"all",delay:this.del});this.ticker.start()},animateIn:function(t){this.reset();this.started=true;this.del=this.settings.transcross||t?this.settings.transtime*.001*.5:0;this.timer=setTimeout(this.transitionIn.bind(this),this.del)},animateOut:function(t){clearTimeout(this.timer);this.tweenIn=null;this.supressEvents=true;this.started=false;var e=this.settings.transtime*.001;var i={speedx:this.orig.speedx+this.settings.transpeedx,speedy:this.orig.speedy+this.settings.transpeedy,rotationx:this.orig.rotationx+this.settings.transrotx,rotationy:this.orig.rotationy+this.settings.transroty,rotation:this.orig.rotation+this.settings.transrot,ease:this.settings.easing,overwrite:"all"};if(this.settings.transcross&&t){this.nextslide=t;i.onComplete=this.onComplete.bind(this)}if(this.settings.transpower)i.onUpdate=this.onUpdateOut.bind(this);punchgs.TweenLite.to(this.filter.scale,e,{x:this.orig.scalex+this.settings.transitionx,y:this.orig.scaley+this.settings.transitiony,ease:this.settings.easing,overwrite:"all"});this.tweenOut=punchgs.TweenLite.to(this.settings,e,i);punchgs.TweenLite.to(this.renderer.view,e,{opacity:0,ease:this.settings.easing,delay:e*.5})},resize:function(){this.slideWidth=this.slide.width();this.slideHeight=this.slide.height();this.slideRatio=this.slideWidth/this.slideHeight;this.displacement.x=this.slideWidth/2;this.displacement.y=this.slideHeight/2;this.renderer.resize(this.slideWidth,this.slideHeight);this.img.width=this.w;this.img.height=this.h;if(this.slideRatio>1&&this.slideRatio>this.imageRatio){this.img.width=this.slideWidth;this.img.height=this.slideWidth/this.imageRatio}else{this.img.width=this.slideHeight*this.imageRatio;this.img.height=this.slideHeight}this.img.x=this.slideWidth/2;this.img.y=this.slideHeight/2},reset:function(t){this.tweenIn=null;this.tweenOut=null;this.ticker.stop();clearTimeout(this.timer);punchgs.TweenLite.killTweensOf(this.filter.scale);punchgs.TweenLite.killTweensOf(this.settings);punchgs.TweenLite.killTweensOf(this.renderer.view);if(t)return;if(this.settings.power){this.displacement.rotation=0;this.displacement.scale.set(1)}this.displacement.x=this.w/2;this.displacement.y=this.h/2;this.displacement.rotation.x=0;this.displacement.rotation.y=0;this.displacement.rotation=0;this.settings.speedx=this.orig.speedx+this.settings.transpeedx;this.settings.speedy=this.orig.speedy+this.settings.transpeedy;this.settings.rotationx=this.orig.rotationx+this.settings.transrotx;this.settings.rotationy=this.orig.rotationy+this.settings.transroty;this.filter.scale.x=this.orig.scalex+this.settings.transitionx;this.filter.scale.y=this.orig.scaley+this.settings.transitiony;this.renderer.view.style.opacity=0},destroy:function(){if(this.ticker){this.reset(true);this.container.pointerdown=null;this.container.pointerup=null;this.container.pointerover=null;this.container.pointerout=null;this.container.touchstart=null;this.container.touchend=null}if(this.renderer)this.slide.remove(this.renderer.view);for(var t in this)if(this.hasOwnProperty(t))delete this[t]}}})();