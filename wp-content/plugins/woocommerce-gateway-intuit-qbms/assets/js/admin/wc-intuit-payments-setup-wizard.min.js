"use strict";intuit.ipp.anywhere.setup({grantUrl:wc_intuit_payments.connect_url,datasources:{quickbooks:!1,payments:!0},paymentOptions:{intuitReferred:!0}}),jQuery(document).ready(function(i){var e=i("#wc_gateway_"+wc_intuit_payments.gateway_id+"_client_id"),o=i("#wc_gateway_"+wc_intuit_payments.gateway_id+"_client_secret");if(e.length&&o.length){var s=e.closest("form");window.onQuickBooksConnectionFailed=function(t){s.find("h1, .wc-intuit-payments-setup-connection-settings, .wc-setup-actions").hide(),t?(t.endsWith(".")&&(t=t.substring(0,t.length-1)),s.find(".wc-intuit-payments-connection-error-with-message").show().find("span").text(t)):s.find(".wc-intuit-payments-connection-error").show(),s.find(".wc-intuit-payments-setup-connection-suggestions").show()},window.onQuickBooksSuccessfulConnection=function(){window.location.href=s.find(".button-next").attr("href")},s.on("keypress keyup change","#"+e.attr("id")+", #"+o.attr("id"),function(){var t=i(this),n=t.closest(".form-row"),e=t.val();""===e?(n.addClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message-empty').show()):e.match(/^[a-zA-Z0-9]{10,}$/)?(n.removeClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message').hide()):(n.addClass("woocommerce-invalid"),i('label[for="'+t.attr("id")+'"].wc-intuit-payments-error-message-invalid').show())}),s.on("click",".button-next",function(t){if(t.preventDefault(),e.add(o).trigger("change"),e.closest(".form-row").hasClass("woocommerce-invalid")||o.closest(".form-row").hasClass("woocommerce-invalid"))s.find(".woocommerce-invalid input").first().focus();else{var n={action:"wc_intuit_payments_update_connection_settings",nonce:wc_intuit_payments.update_connection_settings_nonce,gateway_id:wc_intuit_payments.gateway_id,client_id:e.val(),client_secret:o.val()};i.post(wc_intuit_payments.ajaxurl,n,function(t){t.success?intuit.ipp.anywhere.controller.onConnectToIntuitClicked(s.find(".button-next").get(0)):onQuickBooksConnectionFailed(t.data)})}})}});