!function(n){"use strict";if("undefined"==typeof wc_instagram_product_catalog_params)return;({$body:n("body"),$deleteLink:null,formFields:{},autoUpdateSlug:!0,init:function(){var t=this.getFormField("slug").val();this.autoUpdateSlug=""===t,this.toggleFormFields("slug",""!==t),n(".wc-instagram-field-editable-url").wc_instagram_editable_url(),wc_instagram_product_catalog_params.delete_link&&(this.$deleteLink=n(wc_instagram_product_catalog_params.delete_link),n("#mainform .woocommerce-save-button").after(this.$deleteLink)),this.bindEvents()},bindEvents:function(){var o=this;this.getFormField("title").keyup(function t(a,o,n){var l;return function(){var t=this,e=arguments,i=n&&!l;clearTimeout(l),l=setTimeout(function(){l=null,n||a.apply(t,e)},o),i&&a.apply(t,e)}}(function(){o.autoUpdateSlug&&o.refreshCatalogSlug(n(this).val())},1e3,!1)),this.getFormField("slug").on("wc_instagram_editable_url_change",function(t,e){o.refreshCatalogSlug(e)}),this.$body.on("wc_instagram_product_catalog_slug_updated",function(t,e){o.autoUpdateSlug=o.autoUpdateSlug&&""===e,o.toggleFormFields("slug",!0),o.getFormField("slug").val(e).change()}),this.$body.on("wc_instagram_subset_values_updated",function(t,e,i){var a=!1;"product_types"===e&&(a=o.inSubset("variable",i),o.toggleFormFields(["virtual_products","downloadable_products"],o.inSubset("simple",i)),o.toggleFormFields("include_variations",a),o.toggleFormFields(["product_group_id","variation_description_field"],a&&o.getFormField("include_variations").prop("checked")))}),this.getFormField("include_variations").change(function(){var t=n(this).prop("checked");o.toggleFormFields("product_group_id",t),o.toggleFormFields("variation_description_field",t)}).change(),this.getFormField("product_mpn").change(function(){o.toggleFormFields("custom_mpn","custom"===n(this).val())}).change(),this.getFormField("include_tax").change(function(){o.toggleFormFields("tax_country","base"!==wc_instagram_product_catalog_params.tax_based_on&&n(this).prop("checked"))}).change(),this.$deleteLink&&this.$deleteLink.click(function(t){if(!window.confirm(n(this).data("confirm")))return t.preventDefault(),!1})},getFormField:function(t){return this.formFields[t]||(this.formFields[t]=n("#"+t)),this.formFields[t]},toggleFormFields:function(t,i){var a=this;n.isArray(t)||(t=[t]),n.each(t,function(t,e){a.getFormField(e).closest("tr").toggle(i)})},refreshCatalogSlug:function(t){var e=this;t&&n.post({url:wc_instagram_product_catalog_params.ajax_url,data:{action:"wc_instagram_generate_product_catalog_slug",catalog_id:wc_instagram_product_catalog_params.catalog_id,catalog_title:t},dataType:"json",success:function(t){t.success&&e.$body.trigger("wc_instagram_product_catalog_slug_updated",t.data.slug)}})},inSubset:function(t,e){return""===e.option||"specific"===e.option&&-1!==e.values.indexOf(t)||"all_except"===e.option&&-1===e.values.indexOf(t)}}).init()}(jQuery);