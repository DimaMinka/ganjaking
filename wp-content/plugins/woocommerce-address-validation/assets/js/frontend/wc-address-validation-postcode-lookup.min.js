"use strict";(function(){jQuery(document).ready(function(o){var d,s,i,a,l,c,r,_,p,n;return l=o(".wc-address-validation-field"),c=l.find("select"),r=c.parent("p"),s=o(".wc-address-validation-billing-field"),p=o(".wc-address-validation-shipping-field"),a=o('p[id$="_field"], p.create-account').not("#billing_country_field, #shipping_country_field, #billing_first_name_field, #shipping_first_name_field, #billing_last_name_field, #shipping_last_name_field, #billing_company_field, #shipping_company_field"),d=o('p[id^="billing_"][id$="_field"], p.create-account').not("#billing_country_field, #billing_first_name_field, #billing_last_name_field, #billing_company_field"),_=o('p[id^="shipping_"][id$="_field"]').not("#shipping_country_field, #shipping_first_name_field, #shipping_last_name_field, #shipping_company_field"),i=o('select[id$="country"], input[id$="country"]'),n=wc_address_validation_postcode_lookup.countries,setTimeout(function(){return o("#billing_country_field").after(s),o("#shipping_country_field").after(p)},1),i.on("change",function(i){var e;if(e=o(this),-1!==o.inArray(o("#billing_country").val(),n)?(s.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#billing_country_field").after(s)},1)):s.hide(),-1!==n.indexOf(o("#shipping_country").val())?(p.not(".wc-address-validation-results").show(),setTimeout(function(){return o("#shipping_country_field").after(p)},1)):p.hide(),wc_address_validation_postcode_lookup.force_postcode_lookup){if(e.is("#billing_country"))return d.delay().queue(function(){return-1!==n.indexOf(o("#billing_country").val())&&""===wc_address_validation_postcode_lookup.billing_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()});if(e.is("#shipping_country"))return _.delay().queue(function(){return-1!==n.indexOf(o("#shipping_country").val())&&""===wc_address_validation_postcode_lookup.shipping_postcode?o(this).hide():0===o(this).find('input[type="hidden"].hidden').length&&o(this).show(),o(this).dequeue()})}}),i.trigger("change"),o().select2&&l.find("select.wc-address-validation-enhanced-select").select2(),r.hide(),l.keypress(function(i){if(13===i.keyCode)return(l="billing"===o(this).find(".wc-address-validation-address-type").val()?s:p).find("a.button").trigger("click"),!1}),l.on("click","a.button",function(i){var e,n,t;return i.preventDefault(),e=o(this).siblings(".wc-address-validation-address-type").val(),a="billing"===e?d:_,c=(l="billing"===e?s:p).find("select"),!((r=c.parent("p")).is(".processing")||!l.find("input[type=text]").val())&&(r.addClass("processing").block({message:null,overlayCSS:{background:"#fff url( "+wc_address_validation_postcode_lookup.ajax_loader_url+" ) no-repeat center",opacity:.6}}),t={action:"wc_address_validation_lookup_postcode",security:wc_address_validation_postcode_lookup.nonce,postcode:l.find('input[name="wc_address_validation_postcode_lookup_postcode"]').val(),house_number:l.find('input[name="wc_address_validation_postcode_lookup_postcode_house_number"]').val()},"undefined"!=typeof wc_checkout_params?(n=wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","wc_address_validation_lookup_postcode"),delete t.action):n=wc_address_validation_postcode_lookup.ajax_url,o.ajax({type:"GET",url:n,data:t,dataType:"json",success:function(i){var e;if(i)return r.removeClass("processing").unblock(),c.find("option").remove(),r.show(),o(i).map(function(){return o("<option>").val(this.value).text(this.name).data("location",this).appendTo(c)}),e=function(){if(o().select2)return c.trigger("change"),c.select2("open")},!a.is(":visible")&&wc_address_validation_postcode_lookup.force_postcode_lookup&&"none"!==i.value?a.slideDown(null,function(){return e()}):e()}}))}),c.change(function(){var i,n,t;if(t=o(this).hasClass("billing")?"billing":"shipping",i=["company","address_1","address_2","address_3","city","postcode","state"],"none"!==(n=o(this).find(":selected").data("location")).value)return o.each(i,function(i,e){return o("input[name="+t+"_"+e+"]").val(n[e])}),o(document.body).trigger("update_checkout")})})}).call(void 0);